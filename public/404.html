<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>СТРОЙКА - Строительная компания</title>
    <script>
      // Single Page Apps for GitHub Pages
      // Редирект для работы React Router на GitHub Pages
      (function() {
        var path = window.location.pathname;
        var repo = 'stroyka';
        var basePath = '/' + repo + '/';
        
        // Сохраняем query string и hash
        var search = window.location.search || '';
        var hash = window.location.hash || '';
        
        // Если путь уже содержит basePath (например /stroyka/shop)
        if (path.startsWith(basePath)) {
          // Извлекаем путь после basePath (например "shop" из "/stroyka/shop")
          var relativePath = path.substring(basePath.length);
          
          // Если это не index.html, сохраняем путь для React Router
          if (relativePath && relativePath !== 'index.html') {
            // Сохраняем путь в sessionStorage, чтобы React Router мог его использовать
            sessionStorage.setItem('ghp_redirect', relativePath);
          }
          
          // Редиректим на index.html
          var redirectPath = basePath + 'index.html' + search + hash;
          window.location.replace(redirectPath);
        } else {
          // Если путь не содержит basePath, добавляем его
          var pathSegments = path.split('/').filter(function(seg) {
            return seg && seg !== '';
          });
          
          // Убираем repo если он есть
          if (pathSegments[0] === repo) {
            pathSegments.shift();
          }
          
          // Сохраняем путь если он есть
          if (pathSegments.length > 0) {
            sessionStorage.setItem('ghp_redirect', pathSegments.join('/'));
          }
          
          // Редиректим на index.html
          var redirectPath = basePath + 'index.html' + search + hash;
          window.location.replace(redirectPath);
        }
      })();
    </script>
  </head>
  <body>
    <p>Перенаправление...</p>
  </body>
</html>

